<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Logging Levels | Wahid Ustoz </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Logging Levels | Wahid Ustoz ">
      
      <link rel="icon" href="../images/favicon/favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/wahid-d/diary/blob/main/dotnet/log-levels.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
  </head>

  <script type="module" src="./../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/icon.png" alt="Diary">
            Diary
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="logging-levels">Logging Levels</h1>

<p><strong>Logging</strong> dasturni eng muhim qismlaridan biri hisoblanadi. Ko’pchilik unga katta e’tibor bermasa ham <strong>Logging</strong> to’g’ri qilinmasa juda katta mablag’ va vaqt yo’qotilishiga olib kelishi mumkin.</p>
<blockquote>
<p><em>Odam yozgan lyuboy sistemada Bug 🪲 bo’ladi.</em></p>
</blockquote>
<p>Dastur ishga tushgandan keyin kelib chiqqan xatoliklarni dasturda yozib borilayotgan Loglarsiz qidirib topishni imkoni yo’q.</p>
<p>Bugungi postda <strong>Log Levels</strong> ya’ni log xabarlarni muhimlik darajalariga qarab qanday ishlatishni o’rganamiz.</p>
<h2 id="1-trace--loggerlogtrace">1. <code>Trace — logger.LogTrace()</code></h2>
<p>Bu turdagi loglar dastur davomidagi har bir qadamni batafsil yozib ketish uchun ishlatiladi. Yangi jarayon, funksiya, loop yoki oqim boshlanishi va tugaganidan keyin iz qoldirish uchun Trace log yozib ketiladi.</p>
<pre><code class="lang-csharp">public async Task ProcessOrder(CustomerOrder order)
{
    logger.LogTrace(&quot;Starting order processing for OrderId: {OrderId}&quot;, order.OrderId);

    // Validate the order
    if (IsOrderValid(order))
    {
        logger.LogTrace(&quot;Order validation successful for OrderId: {OrderId}&quot;, order.OrderId);

        // Perform necessary actions such as updating inventory, sending notifications, etc.
        logger.LogTrace(&quot;Persisting order with OrderId: {OrderId}&quot;, order.OrderId);
        await storage.PersistOrderAsync(order);

        logger.LogTrace(&quot;Publishing OrderCreated message with OrderId: {OrderId}&quot;, order.OrderId);
        await messaging.PublishOrderCreated(order);
    }
}
</code></pre>
<hr>
<h2 id="2-debug--loggerlogdebug">2. <code>Debug — logger.LogDebug()</code></h2>
<p>Bu turdagi log Tracega juda ham yaqin, lekin yagona farqi Debug log ichida o’zgaruvchilar qiymatlari batafsilroq yoritiladi. Shu sababli bu turdagi log ichida maxfiy ma’lumotlar bo’lishi mumkin. Debug va Trace log miqdori juda katta bo’lgani uchun odatda Production muhitda o’chirib qo’yish tavsiya qilinadi.</p>
<blockquote>
<p><em>Shaxsiy fikrimcha <strong>Debug</strong> yoki <strong>Trace</strong> darajasidan kamida bittasi <strong>Production</strong> muhitda ham ko’rinishi kerak.</em></p>
</blockquote>
<pre><code class="lang-csharp">public async Task ProcessOrder(CustomerOrder order)
{
    logger.LogTrace(&quot;Starting order processing for OrderId: {OrderId}&quot;, order.OrderId);
    logger.LogDebug(&quot;Processing order: {Order}&quot;, order);

    // Validate the order
    if (IsOrderValid(order))
    {
        logger.LogTrace(&quot;Order validation successful for OrderId: {OrderId}&quot;, order.OrderId);
        logger.LogDebug(&quot;Order validation successful for: {Order}&quot;, order);

        // Perform necessary actions such as updating inventory, sending notifications, etc.
        logger.LogTrace(&quot;Persisting order with OrderId: {OrderId}&quot;, order.OrderId);
        logger.LogDebug(&quot;Persisting order: {order}&quot;, order);
        await storage.PersistOrderAsync(order);

        logger.LogTrace(&quot;Publishing OrderCreated message with OrderId: {OrderId}&quot;, order.OrderId);
        logger.LogDebug(&quot;Publishing OrderCreated for order: {order}&quot;, order);
        await messaging.PublishOrderCreated(order);
    }
}
</code></pre>
<hr>
<h2 id="summary">Summary</h2>
<p>Yuqorida keltirilgan LogTrace va LogDebug odatda dasturchilar uchun yo’naltirilgan bo’ladi. Ya’ni bu turdagi loglarni odatda developerlar BUG🪲ni qidirib topish uchun ishlatishadi.</p>
<h2 id="3-information--loggerloginformation">3. <code>Information — logger.LogInformation()</code></h2>
<p>Bu turdagi log odatda biror katta jarayon boshlanishi va muvaffaqiyatli tugaganini ko’rsatish uchun ketiladi. Trace va Debugdan farqli o’laroq, Information turidagi xabarlar miqdori juda kam bo’ladi. Bunday log ichida iloji boricha maxfiy ma’lumotlar ko’rsatilmasligi kerak.</p>
<pre><code class="lang-csharp">public async Task ProcessOrder(CustomerOrder order)
{
    logger.LogTrace(&quot;Starting order processing for OrderId: {OrderId}&quot;, order.OrderId);
    logger.LogDebug(&quot;Processing order: {Order}&quot;, order);

    // Validate the order
    if (IsOrderValid(order))
    {
        logger.LogTrace(&quot;Order validation successful for OrderId: {OrderId}&quot;, order.OrderId);
        logger.LogDebug(&quot;Order validation successful for: {Order}&quot;, order);

        // Perform necessary actions such as updating inventory, sending notifications, etc.
        logger.LogTrace(&quot;Persisting order with OrderId: {OrderId}&quot;, order.OrderId);
        logger.LogDebug(&quot;Persisting order: {order}&quot;, order);
        await storage.PersistOrderAsync(order);

        logger.LogTrace(&quot;Publishing OrderCreated message with OrderId: {OrderId}&quot;, order.OrderId);
        logger.LogDebug(&quot;Publishing OrderCreated for order: {order}&quot;, order);
        await messaging.PublishOrderCreated(order);

        logger.LogInformation(&quot;Order with orderId {OrderId} successfully processed.&quot;, order.Id);
    }
}
</code></pre>
<h2 id="4-warning--loggerlogwarning">4. <code>Warning — logger.LogWarning()</code></h2>
<p>Warning xabarlar dasturda kutilmagan holat yoki noto’g’ri ma’lumot paydo bo’lganda qoldiriladi. Bunday holat yuz berganda dasturchi, sistema admini yoki dasturni o’zi ham hech qanday amal bajarish orqali xatoni tuzatishga urinishi shart emas.
Bu xabarni muhim tarafi, sistemadagi bu kutilmagan holat keyinchalik e’tibor talab etuvchi jiddiy xatolikka olib borishi mumkin.</p>
<pre><code class="lang-csharp">public async Task ProcessOrder(CustomerOrder order)
{
    logger.LogTrace(&quot;Starting order processing for OrderId: {OrderId}&quot;, order.OrderId);
    logger.LogDebug(&quot;Processing order: {Order}&quot;, order);

    // Validate the order
    if (IsOrderValid(order))
    {
        logger.LogTrace(&quot;Order validation successful for OrderId: {OrderId}&quot;, order.OrderId);
        logger.LogDebug(&quot;Order validation successful for: {Order}&quot;, order);

        // Perform necessary actions such as updating inventory, sending notifications, etc.
        logger.LogTrace(&quot;Persisting order with OrderId: {OrderId}&quot;, order.OrderId);
        logger.LogDebug(&quot;Persisting order: {order}&quot;, order);
        await storage.PersistOrderAsync(order);

        logger.LogTrace(&quot;Publishing OrderCreated message with OrderId: {OrderId}&quot;, order.OrderId);
        logger.LogDebug(&quot;Publishing OrderCreated for order: {order}&quot;, order);
        await messaging.PublishOrderCreated(order);

        logger.LogInformation(&quot;Order with orderId {OrderId} successfully processed.&quot;, order.Id);
    }
    else
    {
        logger.LogDebug(&quot;Validation failed for order {order}&quot;, order);    // batafsil ma'lumot qoldirish uchun
        logger.LogWarning(&quot;Validation failed for order with id: {OrderId}&quot;, order.Id);

        logger.LogDebug(&quot;Publishing OrderFailed for order: {order}&quot;, order);
        await messaging.PublishOrderFailed(order);
    }
}
</code></pre>
<hr>
<h2 id="5-error--loggerlogerror">5. <code>Error — logger.LogError()</code></h2>
<p>Error xabarlar biror katta yumush bajarish jarayonida xatolik yuz berib shu funksiya oxiriga yeta olmasa qoldiriladi. Error xabar qoldirilish shu jarayon oxiriga yetmay qolganini lekin sistemaning boshqa qismlariga ta’sir qilmasligini anglatadi. Odatda Error xabarlarni sistemani o’zinig Error Handling, Retry mexanizmlari bartafar qiladi. Ayrim hollarda operatorlar ma’lumot xolatini o’zgartirish orqali ham bu Error holatdan chiqib ketishlari mumkin.</p>
<p>Error xabar yuz berganda Operatorlar yoki dasturchilar uyqularidan turib bo’lsa ham shu xatolikni bartaraf etishlari kerak. Shuning uchun bu turdagi xatoliklarni log qilishda shoshilmaslik kerak. <em>Operator va dasturchini uyqusini buzishga arziydimi</em> degan savolni berish kerak.</p>
<p><img src="https://media4.giphy.com/media/jG5uIKBfJyouY/giphy.gif?cid=7941fdc6loeg1acst9hzogxw3f6v9r4lf2w9bwq1fm4xh9o9&amp;ep=v1_gifs_search&amp;rid=giphy.gif&amp;ct=g" alt="https://media4.giphy.com/media/jG5uIKBfJyouY/giphy.gif?cid=7941fdc6loeg1acst9hzogxw3f6v9r4lf2w9bwq1fm4xh9o9&amp;ep=v1_gifs_search&amp;rid=giphy.gif&amp;ct=g"></p>
<pre><code class="lang-csharp">public async Task ProcessOrder(CustomerOrder order)
{
    logger.LogTrace(&quot;Starting order processing for OrderId: {OrderId}&quot;, order.OrderId);
    logger.LogDebug(&quot;Processing order: {Order}&quot;, order);

    // Validate the order
    if (IsOrderValid(order))
    {
        logger.LogTrace(&quot;Order validation successful for OrderId: {OrderId}&quot;, order.OrderId);
        logger.LogDebug(&quot;Order validation successful for: {Order}&quot;, order);

        try
        {
            // Perform necessary actions such as updating inventory, sending notifications, etc.
            logger.LogTrace(&quot;Persisting order with OrderId: {OrderId}&quot;, order.OrderId);
            logger.LogDebug(&quot;Persisting order: {order}&quot;, order);
            await storage.PersistOrderAsync(order);

            logger.LogTrace(&quot;Publishing OrderCreated message with OrderId: {OrderId}&quot;, order.OrderId);
            logger.LogDebug(&quot;Publishing OrderCreated for order: {order}&quot;, order);
            await messaging.PublishOrderCreated(order);
        }
        catch(DbException ex)
        {
            logger.LogError(&quot;Order processing failed for order with id: {OrderId}&quot;, order.Id);
            throw new OrderProcessingFailedException(order, ex);
        }

        logger.LogInformation(&quot;Order with orderId {OrderId} successfully processed.&quot;, order.Id);
    }
    else
    {
        logger.LogDebug(&quot;Validation failed for order {order}&quot;, order);    // batafsil ma'lumot qoldirish uchun
        logger.LogWarning(&quot;Validation failed for order with id: {OrderId}&quot;, order.Id);

        logger.LogDebug(&quot;Publishing OrderFailed for order: {order}&quot;, order);
        await messaging.PublishOrderFailed(order);
    }
}
</code></pre>
<hr>
<h2 id="6-critical--loggerlogcritical">6. <code>Critical — logger.LogCritical()</code></h2>
<p>Bunday Log sistemani barcha qismlarini ishdan chiqaruvchi xatolikni yozish uchun ishlatiladi. Masalan, RAM yoki SSD xotira tugab qolishi, butun dastur bo’ylab Database’ga bog’lana olmaslik yoki shunga o’xshash dastur ishlashi uchun so’zsiz kerak resursni yo’qligi.</p>
<p>Bunday xatoliklar dastur davomida bir marta yuz beradi. Ya’ni Critical error yuz bergandan keyin dastur o’chib qolishi va Sistem adminstrator tomonidan qayta yoqilishi zarur. Critical error xabar yuz berganda Sistem Adminstrator uyqusidan turib bo’lsa ham xatolikni bartaraf etishi kerak.</p>
<p><img src="https://media0.giphy.com/media/8p9O3TyoTaNlXDwmSj/giphy.gif?cid=7941fdc64lordhji9bsz6autt6r8xixu8q2yt1gvha6iz4vu&amp;ep=v1_gifs_search&amp;rid=giphy.gif&amp;ct=g" alt="https://media0.giphy.com/media/8p9O3TyoTaNlXDwmSj/giphy.gif?cid=7941fdc64lordhji9bsz6autt6r8xixu8q2yt1gvha6iz4vu&amp;ep=v1_gifs_search&amp;rid=giphy.gif&amp;ct=g"></p>
<pre><code class="lang-csharp">
builder.Services.AddDbContext&lt;AppDbContext&gt;((provider, options) =&gt;
{
    var logger = provider.Services.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;();
    var connectionString = builder.Configuration.GetConnectionString(&quot;Postgres&quot;);
    if(string.IsNullOrWhiteSpwace(connectionString))
    {
        logger.LogCritical(&quot;Postgres connection string not configured.&quot;);
        Environment.Exit(-1);
    }

    options.UseNqgsql(connectionString);
});
</code></pre>
<hr>
<p>Yuqoridagi misollardan ko’rinib turibdi agar dastur davomida yetarlicha log xabarlar qoldirmoqchi bo’lsangiz kodda judaham noise <em>(shovqin — chalg’ituvchi qismlar)</em> juda ko’payib ketadi. Buni oldini olish uchun Logging Abstraction qo’llash kerak.
Bu haqida batafsil keyingi postda.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/wahid-d/diary/blob/main/dotnet/log-levels.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top">
      <div class="container-xxl">
        <div class="flex-fill">
          © Made with 💟 by <a href='https://t.me/wahidustoz'>Wahid Ustoz</a>
        </div>
      </div>
    </footer>
  </body>
</html>
